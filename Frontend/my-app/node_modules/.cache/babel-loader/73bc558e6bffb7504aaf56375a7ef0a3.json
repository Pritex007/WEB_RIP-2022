{"ast":null,"code":"export const TOGGLE_TRUCK = 'TOGGLE_TRUCK',\n  LOAD_TRUCKS = 'LOAD_TRUCKS',\n  LOAD_BRANDS = 'LOAD_BRANDS',\n  GET_SELECTED_TRUCKS_FROM_LOCAL = 'GET_SELECTED_TRUCKS_FROM_LOCAL',\n  SET_SELECTED_TRUCKS_FOR_LOCAL = 'SET_SELECTED_TRUCKS_FROM_LOCAL';\nexport const reducer = (state, action) => {\n  // type, payload\n  const {\n    type,\n    payload\n  } = action;\n  switch (type) {\n    case LOAD_TRUCKS:\n      console.log(\"LOAD_TRUCK START\");\n      console.log(state);\n      const fetchTrucks = async () => {\n        const resTrucks = await fetch(`/api/cars/`).then(response => {\n          return response.json();\n        }).catch(() => {\n          return {\n            resultCount: 0,\n            results: []\n          };\n        });\n        console.log(\"LOAD_TRUCK MID TRUCKS:\");\n        console.log(resTrucks);\n        const resBrands = [];\n        for (const element of resTrucks) {\n          const tempRes = await fetch(`/api/brands/${element.brand}`).then(response => {\n            return response.json();\n          }).catch(() => {\n            return {\n              resultCount: 0,\n              results: []\n            };\n          });\n          resBrands.push(tempRes.title);\n        }\n        console.log(\"LOAD_TRUCK END\");\n        return {\n          trucks: resTrucks,\n          selectedTrucks: state.selectedTrucks,\n          brands: resBrands,\n          openedTruck: state.openedTruck,\n          openedBrand: state.openedBrand\n        };\n      };\n      fetchTrucks();\n    case TOGGLE_TRUCK:\n      if (state.selectedTrucks.includes(payload.id)) {\n        return {\n          trucks: state.trucks,\n          selectedTrucks: state.selectedTrucks.filter(id => id != payload.id),\n          brands: state.brands,\n          openedTruck: state.openedTruck,\n          openedBrand: state.openedBrand\n        };\n      } else {\n        return {\n          trucks: state.trucks,\n          selectedTrucks: [...state.selectedTrucks, payload.id],\n          brands: state.brands,\n          openedTruck: state.openedTruck,\n          openedBrand: state.openedBrand\n        };\n      }\n    case GET_SELECTED_TRUCKS_FROM_LOCAL:\n      const raw = localStorage.getItem('selectedCards') || [];\n      return {\n        trucks: state.trucks,\n        selectedTrucks: JSON.parse(raw),\n        brands: state.brands,\n        openedTruck: state.openedTruck,\n        openedBrand: state.openedBrand\n      };\n    case SET_SELECTED_TRUCKS_FOR_LOCAL:\n      localStorage.setItem('selectedCards', JSON.stringify(state.selectedTrucks));\n      return state;\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["TOGGLE_TRUCK","LOAD_TRUCKS","LOAD_BRANDS","GET_SELECTED_TRUCKS_FROM_LOCAL","SET_SELECTED_TRUCKS_FOR_LOCAL","reducer","state","action","type","payload","console","log","fetchTrucks","resTrucks","fetch","then","response","json","catch","resultCount","results","resBrands","element","tempRes","brand","push","title","trucks","selectedTrucks","brands","openedTruck","openedBrand","includes","id","filter","raw","localStorage","getItem","JSON","parse","setItem","stringify"],"sources":["C:/Users/prite/WebstormProjects/lab4/my-app/src/Supporting Files/reducer.js"],"sourcesContent":["export const\r\n    TOGGLE_TRUCK = 'TOGGLE_TRUCK',\r\n    LOAD_TRUCKS = 'LOAD_TRUCKS',\r\n    LOAD_BRANDS = 'LOAD_BRANDS',\r\n    GET_SELECTED_TRUCKS_FROM_LOCAL = 'GET_SELECTED_TRUCKS_FROM_LOCAL',\r\n    SET_SELECTED_TRUCKS_FOR_LOCAL = 'SET_SELECTED_TRUCKS_FROM_LOCAL'\r\n\r\nexport const reducer = (state, action) => {\r\n// type, payload\r\n    const { type, payload } = action\r\n    switch(type) {\r\n        case LOAD_TRUCKS:\r\n            console.log(\"LOAD_TRUCK START\")\r\n            console.log(state)\r\n            const fetchTrucks = async () => {\r\n                const resTrucks = await fetch(`/api/cars/`)\r\n                    .then((response) => {\r\n                        return response.json();\r\n                    }).catch(() => {\r\n                        return {resultCount: 0, results: []}\r\n                    })\r\n                console.log(\"LOAD_TRUCK MID TRUCKS:\")\r\n                console.log(resTrucks)\r\n                const resBrands = []\r\n                for (const element of resTrucks) {\r\n                    const tempRes = await fetch(`/api/brands/${element.brand}`)\r\n                        .then((response) => {\r\n                            return response.json();\r\n                        }).catch(() => {\r\n                            return {resultCount: 0, results: []}\r\n                        })\r\n                    resBrands.push(tempRes.title)\r\n                }\r\n                console.log(\"LOAD_TRUCK END\")\r\n                return {\r\n                    trucks: resTrucks,\r\n                    selectedTrucks: state.selectedTrucks,\r\n                    brands: resBrands,\r\n                    openedTruck: state.openedTruck,\r\n                    openedBrand: state.openedBrand\r\n                }\r\n            }\r\n            fetchTrucks()\r\n        case TOGGLE_TRUCK:\r\n            if (state.selectedTrucks.includes(payload.id)) {\r\n                return {\r\n                    trucks: state.trucks,\r\n                    selectedTrucks: state.selectedTrucks.filter(id => id != payload.id),\r\n                    brands:  state.brands,\r\n                    openedTruck: state.openedTruck,\r\n                    openedBrand: state.openedBrand\r\n                }\r\n            } else {\r\n                return {\r\n                    trucks: state.trucks,\r\n                    selectedTrucks: [...state.selectedTrucks, payload.id],\r\n                    brands:  state.brands,\r\n                    openedTruck: state.openedTruck,\r\n                    openedBrand: state.openedBrand\r\n                }\r\n            }\r\n\r\n        case GET_SELECTED_TRUCKS_FROM_LOCAL:\r\n            const raw = localStorage.getItem('selectedCards') || []\r\n            return {\r\n                trucks: state.trucks,\r\n                selectedTrucks: JSON.parse(raw),\r\n                brands:  state.brands,\r\n                openedTruck: state.openedTruck,\r\n                openedBrand: state.openedBrand\r\n            }\r\n\r\n        case SET_SELECTED_TRUCKS_FOR_LOCAL:\r\n            localStorage.setItem('selectedCards', JSON.stringify(state.selectedTrucks))\r\n            return state\r\n        default:\r\n            return state\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}